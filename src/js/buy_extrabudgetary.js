"use strict";$(document).ready(function(){new Vue({el:"#buyExtrabudgetary",data:{project:{content:"",number:""},projects:[{id:"XM23141231232",name:"项目一"},{id:"XM23523111232",name:"项目二"},{id:"XM23145423121",name:"项目三"}],extrabudgetary:_schemas.extrabudgetary,suppliers:[{id:1,name:"和桥开发商",bank:"中国银行",account:0x36daa017a5bdb4000},{id:2,name:"永益供应商",bank:"广发银行",account:0x36daa017a5bdb4000},{id:3,name:"乐音货行",bank:"平安银行",account:6234325234232341e4}],materials:[{id:1,name:"物料一",parameter:"参数一",model:"型号一",manufacturer:"厂家一",unit:"个",price:253,quantity:2534,buy_number:1500,left_number:1034},{id:2,name:"物料二",parameter:"参数二",model:"型号二",manufacturer:"厂家二",unit:"件",price:2542,quantity:500,buy_number:300,left_number:200},{id:4,name:"物料三",parameter:"参数三",model:"型号三",manufacturer:"厂家三",unit:"间",price:123,quantity:5e3,buy_number:2300,left_number:2700},{id:3,name:"物料四",parameter:"参数四",model:"型号四",manufacturer:"厂家四",unit:"间",price:542,quantity:5e3,buy_number:5e3,left_number:0}],newMaterial:{}},mounted:function(){this.extrabudgetary.date=_helper.timeFormat(new Date,"YYYY-MM-DD"),$("#buyExtrabudgetary").removeClass("invisible")},methods:{querySearchProjectId:function(e,t){var a=this.projects,r=e?a.filter(this.createFilterProjectId(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r)},1e3*Math.random())},createFilterProjectId:function(e){return function(t){return 0===t.id.toLowerCase().indexOf(e.toLowerCase())}},handleSelectProjectId:function(e){this.project.id=e.id,this.project.content=e.name},querySearch:function(e,t){var a=this.projects,r=e?a.filter(this.createFilter(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r)},1e3*Math.random())},createFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.project.id=e.id,this.project.content=e.name},handleSelectSupplier:function(e){this.extrabudgetary.supplier=e},querySearchSupplier:function(e,t){var a=this.suppliers,r=e?a.filter(this.createFilterSupplier(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r)},1e3*Math.random())},createFilterSupplier:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},addMaterial:function(){var e=this.extrabudgetary.list,t=this.newMaterial,a={id:e.length>0&&e[e.length-1].id?e[e.length-1].id+1:1,__type:t.status?"old":"new",material:t.status?t:{name:t.name}};this.extrabudgetary.list.push(a)},querySearchMaterial:function(e,t){var a=this.materials,r=e?a.filter(this.createFilterMaterial(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r)},1e3*Math.random())},createFilterMaterial:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},handleSelectMaterial:function(e){this.newMaterial=Object.assign({},e),this.newMaterial.status=!0},materialInput:function(){this.newMaterial.status=!1},deleteItem:function(e,t,a){this.extrabudgetary[e].splice(a,1)},uploadContract:function(e){var t=e.target.files;if(!(t.length<1))for(var a=this.extrabudgetary.contracts,r=0;r<t.length;r++){var i={id:a.length>0&&a[a.length-1].id?a[a.length-1].id+1:1,name:t[r].name,url:"http://xxx.com/upload/"+t[r].name};this.extrabudgetary.contracts.push(i)}},submitForm:function(){}}})});