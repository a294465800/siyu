"use strict";$(document).ready(function(){new Vue({el:"#buyExtrabudgetary",data:{project:{content:"",number:""},commodities:[],extrabudgetary:_schemas.extrabudgetary,suppliers:[{id:1,name:"和桥开发商",bank:"中国银行",account:0x36daa017a5bdb4000},{id:2,name:"永益供应商",bank:"广发银行",account:0x36daa017a5bdb4000},{id:3,name:"乐音货行",bank:"平安银行",account:6234325234232341e4}],materials:[{id:1,name:"物料一",parameter:"参数一",model:"型号一",manufacturer:"厂家一",unit:"个",price:253,quantity:2534,buy_number:1500,left_number:1034},{id:2,name:"物料二",parameter:"参数二",model:"型号二",manufacturer:"厂家二",unit:"件",price:2542,quantity:500,buy_number:300,left_number:200},{id:4,name:"物料三",parameter:"参数三",model:"型号三",manufacturer:"厂家三",unit:"间",price:123,quantity:5e3,buy_number:2300,left_number:2700},{id:3,name:"物料四",parameter:"参数四",model:"型号四",manufacturer:"厂家四",unit:"间",price:542,quantity:5e3,buy_number:5e3,left_number:0}],newMaterial:{}},mounted:function(){this.commodities=this.loadAll(),this.extrabudgetary.date=_helper.timeFormat(new Date,"YYYY-MM-DD"),$("#buyExtrabudgetary").removeClass("invisible")},methods:{querySearch:function(e,t){var a=this.commodities,r=e?a.filter(this.createFilter(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r)},1e3*Math.random())},createFilter:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},loadAll:function(){return[{id:1,name:"三全鲜食（北新泾店）",parameter:"这些是一些参数和性能数据",model:"型号一",unit:"间",address:"长宁区新渔路144号"},{id:2,name:"Hot honey 首尔炸鸡（仙霞路）",parameter:"这些是一些参数和性能数据",model:"型号二",unit:"个",address:"上海市长宁区淞虹路661号"},{id:3,name:"新旺角茶餐厅",parameter:"这些是一些参数和性能数据",model:"型号三",unit:"只",address:"上海市普陀区真北路988号创邑金沙谷6号楼113"},{id:4,name:"泷千家(天山西路店)",parameter:"这些是一些参数和性能数据",model:"型号四",unit:"件",address:"天山西路438号"},{id:5,name:"胖仙女纸杯蛋糕（上海凌空店）",parameter:"这些是一些参数和性能数据",model:"型号五",unit:"间",address:"上海市长宁区金钟路968号1幢18号楼一层商铺18-101"},{id:6,name:"贡茶",parameter:"这些是一些参数和性能数据",model:"型号六",unit:"间",address:"上海市长宁区金钟路633号"},{id:7,name:"豪大大香鸡排超级奶爸",parameter:"这些是一些参数和性能数据",model:"型号七",unit:"间",address:"上海市嘉定区曹安公路曹安路1685号"},{id:8,name:"茶芝兰（奶茶，手抓饼）",parameter:"这些是一些参数和性能数据",model:"型号八",unit:"间",address:"上海市普陀区同普路1435号"}]},handleSelect:function(e){this.project.content=e.name,this.project.number=e.id},handleSelectSupplier:function(e){this.extrabudgetary.supplier=e},querySearchSupplier:function(e,t){var a=this.suppliers,r=e?a.filter(this.createFilterSupplier(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r)},1e3*Math.random())},createFilterSupplier:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},addMaterial:function(){var e=this.extrabudgetary.list,t=this.newMaterial,a={id:e.length>0&&e[e.length-1].id?e[e.length-1].id+1:1,__type:t.status?"old":"new",material:t.status?t:{name:t.name}};this.extrabudgetary.list.push(a)},querySearchMaterial:function(e,t){var a=this.materials,r=e?a.filter(this.createFilterMaterial(e)):a;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(r)},1e3*Math.random())},createFilterMaterial:function(e){return function(t){return 0===t.name.toLowerCase().indexOf(e.toLowerCase())}},handleSelectMaterial:function(e){this.newMaterial=Object.assign({},e),this.newMaterial.status=!0},materialInput:function(){this.newMaterial.status=!1},deleteItem:function(e,t,a){this.extrabudgetary[e].splice(a,1)},uploadContract:function(e){var t=e.target.files;if(!(t.length<1))for(var a=this.extrabudgetary.contracts,r=0;r<t.length;r++){var i={id:a.length>0&&a[a.length-1].id?a[a.length-1].id+1:1,name:t[r].name,url:"http://xxx.com/upload/"+t[r].name};this.extrabudgetary.contracts.push(i)}},submitForm:function(){}}})});