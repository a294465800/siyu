"use strict";$(document).ready(function(){new Vue({el:"#checkInvoice",data:{invoiceForm:_schemas.checkInvoice,companies:[{id:1,name:"单位A"},{id:2,name:"单位B"},{id:2,name:"单位C"}],invoiceType:[]},mounted:function(){$("#checkInvoice").removeClass("invisible");var e=$("#invoiceType").text().trim();this.invoiceType=""===e?[]:JSON.parse(e)},methods:{querySearchCompany:function(e,i){var t=this.companies,n=e?t.filter(this.createFilterCompany(e)):t;clearTimeout(this.timeout),this.timeout=setTimeout(function(){i(n)},1e3*Math.random())},createFilterCompany:function(e){return function(i){return 0===i.name.toLowerCase().indexOf(e.toLowerCase())}},handleSelectCompany:function(e){this.invoiceForm.company_id=e.id,this.invoiceForm.company=e.name},deleteItem:function(e,i,t){this.invoiceForm[e].splice(t,1)},addItem:function(e){var i=this.invoiceForm[e],t=i.length,n=void 0;n=t>0?i[t-1].id+1:1,this.invoiceForm[e].push({id:n})},submit:function(){var e=this;_http.CheckManager.createProjectInvoice(this.invoiceForm).then(function(i){"200"===i.data.code?e.$notify({title:"成功",message:"提交成功",type:"success"}):e.$notify({title:"错误",message:i.data.msg,type:"error"})}).catch(function(i){e.$notify({title:"错误",message:"服务器出错",type:"error"})})}}})});