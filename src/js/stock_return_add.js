"use strict";$(document).ready(function(){new Vue({el:"#returnAdd",data:{projects:[{id:"XM21232312222",name:"项目一",manager:"刘经理"},{id:"XM21235671222",name:"项目二",manager:"陈经理"},{id:"XM2126783222",name:"项目三",manager:"刘经理"}],stockReturnAdd:_schemas.stockReturnAdd,stocks:[{id:1,name:"仓库一",manger:"陈先生"},{id:2,name:"仓库二",manger:"刘先生"},{id:3,name:"仓库三",manger:"洪先生"}],currentMaterial:"",currentMaterialName:"",materials:[{id:1,name:"物料一",model:"型号一",unit:"个",parameter:"这是参数型号",manufacturer:"xx厂家"},{id:2,name:"物料二",model:"型号二",unit:"个",parameter:"这是参数型号",manufacturer:"xx厂家"},{id:3,name:"物料三",model:"型号三",unit:"个",parameter:"这是参数型号",manufacturer:"xx厂家"},{id:4,name:"物料四",model:"型号四",unit:"个",parameter:"这是参数型号",manufacturer:"xx厂家"}],currentMaterialListDialog:!1,currentMaterialListLoader:!0,currentMaterialList:[]},mounted:function(){$("#returnAdd").removeClass("invisible"),this.commodities=this.loadAll()},computed:{sumAmount:function(){var t=this.stockReturnAdd.list;if(!t.length)return 0;var e=0;return t.forEach(function(t,r){var a=t.return_quantity;a&&(e+=a*(t.price||0))}),e}},methods:{querySearch:function(t,e){var r=this.projects,a=t?r.filter(this.createFilter(t)):r;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(a)},1e3*Math.random())},createFilter:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},querySearchStock:function(t,e){var r=this.stocks,a=t?r.filter(this.createFilterStock(t)):r;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(a)},1e3*Math.random())},createFilterStock:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},querySearchMaterial:function(t,e){var r=this.materials,a=t?r.filter(this.createFilterMaterial(t)):r;clearTimeout(this.timeout),this.timeout=setTimeout(function(){e(a)},1e3*Math.random())},createFilterMaterial:function(t){return function(e){return 0===e.name.toLowerCase().indexOf(t.toLowerCase())}},handleSelect:function(t){this.stockReturnAdd.project_id=t.id,this.stockReturnAdd.project_content=t.name,this.stockReturnAdd.project_manger=t.manager},handleSelectStock:function(t){this.stockReturnAdd.stock_id=t.id,this.stockReturnAdd.stock_name=t.name,this.stockReturnAdd.receiver=t.manger},handleSelectMaterial:function(t){this.currentMaterial=t,this.currentMaterialName=t.name},addItem:function(){if(""===this.currentMaterialName)return this.$notify.error({title:"错误",message:"请选择一项"}),!1;var t=this.stockReturnAdd.list,e={id:t.length>0&&t[t.length-1].id?t[t.length-1].id+1:1,material:this.currentMaterial};this.stockReturnAdd.list.push(e)},deleteItem:function(t,e,r){this.stockReturnAdd[t].splice(r,1)},submit:function(){console.log(this.stockReturnAdd)},checkPrice:function(){var t=this;if(!this.currentMaterial.id)return this.$notify({title:"错误",message:"请先选择物料",type:"error"}),!1;this.currentMaterialListLoader=!0,this.currentMaterialListDialog=!0,setTimeout(function(){t.currentMaterialListLoader=!1,t.currentMaterialList=[{id:1,get_id:"LL23213123",stock:"xxx仓库",material_name:"线缆",material_parameter:"这是参数技术",material_model:"1k23",material_manufacturer:"xxx工厂",material_unit:"个",material_price:123,count:2221,amount:12523,project_id:"XM2312321",project_content:"这是内容xxx",project_manager:"陈一发",people:"刘义克"},{id:2,get_id:"LL23213123",stock:"xxx仓库",material_name:"线缆",material_parameter:"这是参数技术",material_model:"1k23",material_manufacturer:"xxx工厂",material_unit:"个",material_price:123,count:11,amount:5232,project_id:"XM2312321",project_content:"这是内容xxx",project_manager:"陈一发",people:"刘义克"},{id:3,get_id:"LL23213123",stock:"xxx仓库",material_name:"线缆",material_parameter:"这是参数技术",material_model:"1k23",material_manufacturer:"xxx工厂",material_unit:"个",material_price:111,count:254,amount:5253,project_id:"XM2312321",project_content:"这是内容xxx",project_manager:"陈一发",people:"刘义克"}]},1e3)}}})});